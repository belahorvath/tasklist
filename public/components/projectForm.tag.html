<projectForm>
<form onsubmit="{ createProject }" id="projectForm">
    <input type="text"  ref="projectName" name="project" placeholder="new Project...">
  <button id="btnProject" class="btn btn-primary" type="submit">Create Project</button>

</form>
    <script>
      this.projects = opts.projects;
      var alreadyExists = false;

      createProject(e) {
        var main = this;
      e.preventDefault();
        if(this.refs.projectName.value) {
          for(var i = 0; i<this.projects.collection.length;i++){
            if(this.refs.projectName.value == this.projects.collection[i].projectName)
            {
              alreadyExists = true;
              alert("Project already exists, please use the existing project!");
            }
          }
          if(alreadyExists == false){

            var tempProject = {
              "id" : this.projects.collection.length,
              "client_id": uuidv4(),
              "title" : this.refs.projectName.value,
              "active" : false};

            $.ajax({
                type: "POST",
                url: '/api/projects',
                data: JSON.stringify(tempProject),
                contentType: 'application/json',
                dataType: 'json',
                success: function(data,status){
                    main.projects.add(data);
                  console.log(status);
                }
              });

/*
              $.ajax({
                  type: "GET",
                  url: '/api/projects',
                  data: {"id" : 13000},
                  dataType: 'json'
                }).done(function(data){
                console.log(data);
                //this.projects.add(data);
              });
*/
            this.refs.projectName.value="";
          }
        }
      }

      // generate uuidv4
      function uuidv4() {
          return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
              var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
              return v.toString(16);
          });
}
</script>
</projectForm>
